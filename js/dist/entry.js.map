{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/src/Admin.js","js/src/RecordsTable.js","js/src/RulesTable.js","js/src/Table.js","js/src/entry.js","node_modules/@perry-rylance/data-table/DataTable.js"],"names":[],"mappings":"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","file":"entry.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import RulesTable from \"./RulesTable\";\r\nimport RecordsTable from \"./RecordsTable\";\r\n\r\nexport default class Admin\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tthis.rulesTable\t\t= new RulesTable($(\"#rules table\"));\r\n\t\tthis.recordsTable\t= new RecordsTable($(\"#records table\"));\r\n\t\t\r\n\t\t$(\"#rest-cache-tabs\").tabs();\r\n\t}\r\n}\r\n\r\nwindow.RESTCache = {\r\n\tadmin: new Admin()\r\n};","import Table from \"./Table\";\r\n\r\nexport default class RecordsTable extends Table\r\n{\r\n\tconstructor(element)\r\n\t{\r\n\t\tsuper(element);\r\n\t\t\r\n\t\t$(\"#rest-cache-admin #refresh-table\").on(\"click\", (event) => this.onRefreshTable(event));\r\n\t\t$(\"#rest-cache-admin #clear-cache\").on(\"click\", (event) => this.onClearCache(event));\r\n\t}\r\n\t\r\n\tonRefreshTable(event)\r\n\t{\r\n\t\t$(\"#rest-cache-admin #records .dataTable\").DataTable().ajax.reload();\r\n\t}\r\n\t\r\n\tonClearCache(event)\r\n\t{\r\n\t\tvar self = this;\r\n\t\t\r\n\t\t$.ajax(this.url, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\tself.onActionComplete(response);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tonActionComplete(event)\r\n\t{\r\n\t\tthis.$element.DataTable().ajax.reload();\r\n\t}\r\n}\r\n","import Table from \"./Table\";\r\n \r\nexport default class RulesTable extends Table\r\n{\r\n\tconstructor(element)\r\n\t{\r\n\t\tsuper(element);\r\n\t\t\r\n\t\tthis.$element.on(\"click\", \"[data-action='cancel']\", event => this.onCancel(event));\r\n\t\t\r\n\t\t$(\"button#add-rule\").on(\"click\", (event) => this.onAddRule(event));\r\n\t}\r\n\t\r\n\tgetControlFromField(field)\r\n\t{\r\n\t\tswitch(field)\r\n\t\t{\r\n\t\t\tcase \"regex\":\r\n\t\t\t\r\n\t\t\t\tvar $input = super.getControlFromField(field);\r\n\t\t\t\t$input.attr(\"type\", \"checkbox\");\r\n\t\t\t\treturn $input;\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"behaviour\":\r\n\t\t\t\r\n\t\t\t\tvar $select = $(\"<select name='behaviour'>\\\r\n\t\t\t\t\t<option value='exclude'>Exclude</option>\\\r\n\t\t\t\t\t<option value='include'>Include</option>\\\r\n\t\t\t\t</select>\");\r\n\t\t\t\t\r\n\t\t\t\treturn $select;\r\n\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase \"priority\":\r\n\t\t\t\t\r\n\t\t\t\tvar $input = super.getControlFromField(field);\r\n\t\t\t\t\r\n\t\t\t\t$input.attr(\"type\", \"number\");\r\n\t\t\t\t\r\n\t\t\t\treturn $input;\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\treturn super.getControlFromField(field);\r\n\t}\r\n\t\r\n\tonCancel(event)\r\n\t{\r\n\t\tthis.$element.DataTable().ajax.reload();\r\n\t}\r\n\t\r\n\tonAddRule(event)\r\n\t{\r\n\t\tvar self = this;\r\n\t\t\r\n\t\t$.ajax(this.url, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\tself.$element.DataTable().ajax.reload();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}","import DataTable from \"@perry-rylance/data-table\";\r\n\r\nexport default class Table extends DataTable\r\n{\r\n\tconstructor(element)\r\n\t{\r\n\t\tsuper(element);\r\n\t\t\r\n\t\tthis.$element = $(element);\r\n\t\t\r\n\t\tthis.url = this.$element.attr(\"data-route\");\r\n\t\t\r\n\t\tthis.$element.on(\"click\", \"[data-action='edit']\", event => this.onEdit(event));\r\n\t\tthis.$element.on(\"click\", \"[data-action='update']\", event => this.onUpdate(event));\r\n\t\tthis.$element.on(\"click\", \"[data-action='delete']\", event => this.onDelete(event));\r\n\t}\r\n\t\r\n\tgetIDFromEvent(event)\r\n\t{\r\n\t\tlet $tr = $(event.currentTarget).closest(\"tr\");\r\n\t\tlet id = $tr.attr(\"data-id\");\r\n\t\t\r\n\t\treturn id;\r\n\t}\r\n\t\r\n\tgetControlFromField(field)\r\n\t{\r\n\t\tlet $input = $(\"<input/>\");\r\n\t\t$input.attr(\"name\", field);\r\n\t\treturn $input;\r\n\t}\r\n\t\r\n\tsetItemEditable(id)\r\n\t{\r\n\t\tlet self = this;\r\n\t\tlet $tr = this.$element.find(\"tr[data-id='\" + id + \"']\");\r\n\t\t\r\n\t\t$tr.children(\"td\").each(function(index, td) {\r\n\t\t\t\r\n\t\t\tlet field = $(td).attr(\"data-field\");\r\n\t\t\t\r\n\t\t\tswitch(field)\r\n\t\t\t{\r\n\t\t\t\tcase \"id\":\r\n\t\t\t\tcase \"actions\":\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tlet $input = self.getControlFromField(field);\r\n\t\t\t\r\n\t\t\tswitch($input.attr(\"type\"))\r\n\t\t\t{\r\n\t\t\t\tcase \"checkbox\":\r\n\t\t\t\t\t$input.prop(\"checked\", $(td).text() == 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t$input.val($(td).text());\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$(td).empty();\r\n\t\t\t$(td).append($input);\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\t$tr.addClass(\"rest-cache-editing\");\r\n\t}\r\n\t\r\n\tonEdit(event)\r\n\t{\r\n\t\tlet id = this.getIDFromEvent(event);\r\n\t\tthis.setItemEditable(id);\r\n\t}\r\n\t\r\n\tonUpdate(event)\r\n\t{\r\n\t\tlet self\t= this;\r\n\t\tlet id\t\t= this.getIDFromEvent(event);\r\n\t\tlet data\t= {};\r\n\t\tlet $tr\t\t= $(event.currentTarget).closest(\"tr\");\r\n\t\t\r\n\t\t$tr.find(\":input\").each(function(index, el) {\r\n\t\t\t\r\n\t\t\tvar name = $(el).attr(\"name\");\r\n\t\t\t\r\n\t\t\tif(!name)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tswitch($(el).attr(\"type\"))\r\n\t\t\t{\r\n\t\t\t\tcase \"checkbox\":\r\n\t\t\t\tcase \"radio\":\r\n\t\t\t\t\tdata[name] = $(el).prop(\"checked\") ? 1 : 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdata[name] = $(el).val();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\t$.ajax(this.url + \"/\" + id, {\r\n\t\t\tmethod: \"PUT\",\r\n\t\t\tdata: data,\r\n\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\tself.onActionComplete(response);\r\n\t\t\t},\r\n\t\t\terror: function(xhr, status, error) {\r\n\t\t\t\tif(xhr.status == 422)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar json = JSON.parse(xhr.responseText);\r\n\t\t\t\t\tself.onError(xhr.status, json);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tonDelete(event)\r\n\t{\r\n\t\tlet self\t= this;\r\n\t\tlet id\t\t= this.getIDFromEvent(event);\r\n\t\t\r\n\t\t$.ajax(this.url + \"/\" + id, {\r\n\t\t\tmethod: \"DELETE\",\r\n\t\t\tsuccess: function(response, status, xhr) {\r\n\t\t\t\tself.onActionComplete(response);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tonActionComplete(event)\r\n\t{\r\n\t\tthis.$element.DataTable().ajax.reload();\r\n\t}\r\n\t\r\n\tonError(code, json)\r\n\t{\r\n\t\tfor(var key in json.errors)\r\n\t\t{\r\n\t\t\talert(json.errors[key]);\r\n\t\t}\r\n\t}\r\n}\r\n","require('./Admin');","export default class DataTable\r\n{\r\n\tconstructor(element)\r\n\t{\r\n\t\tif($.fn.dataTable.ext)\r\n\t\t\t$.fn.dataTable.ext.errMode = \"throw\";\r\n\t\t\r\n\t\tthis.$element = $(element);\r\n\t\t\r\n\t\tvar options = this.getDataTableOptions();\r\n\t\tthis.$element.DataTable(options);\r\n\t}\r\n\t\r\n\tgetDataTableOptions()\r\n\t{\r\n\t\tvar fields\t= this.getColumnFields();\r\n\t\tvar columns\t= [];\r\n\t\t\r\n\t\tfields.forEach(function(field) {\r\n\t\t\tcolumns.push({\r\n\t\t\t\t\"data\": field\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\treturn {\r\n\t\t\t\"ajax\":\t\t\tthis.$element.attr(\"data-route\"),\r\n\t\t\t\"processing\":\ttrue,\r\n\t\t\t\"serverSide\":\ttrue,\r\n\t\t\t\"columns\":\t\tcolumns,\r\n\t\t\t\"createdRow\":\tfunction(row, data, index) {\r\n\t\t\t\t\r\n\t\t\t\tif(!(\"id\" in data))\r\n\t\t\t\t\tconsole.warn(\"No ID in row data\");\r\n\t\t\t\telse\r\n\t\t\t\t\t$(row).attr(\"data-id\", data.id);\r\n\t\t\t\t\r\n\t\t\t\tvar index = 0;\r\n\t\t\t\t$(row).children(\"td\").each(function(index, td) {\r\n\t\t\t\t\t$(td).attr(\"data-field\", fields[index])\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetColumnFields()\r\n\t{\r\n\t\tvar results = [];\r\n\t\t\r\n\t\tthis.$element.find(\"th[data-column-field]\").each(function() {\r\n\t\t\tresults.push( $(this).attr(\"data-column-field\") );\r\n\t\t});\r\n\t\t\r\n\t\treturn results;\r\n\t}\r\n}\r\n\r\nDataTable.createInstance = function(element)\r\n{\r\n\treturn new DataTable(element);\r\n}\r\n\r\n$(window).on(\"load\", function(event) {\r\n\t\r\n\t$(\"table.perry-rylance-datatable\").each(function(index, el) {\r\n\t\t\r\n\t\tif($(el).attr(\"data-auto-initialize\") == \"false\")\r\n\t\t\treturn;\r\n\t\t\r\n\t\tel.dataTable = DataTable.createInstance(el);\r\n\t\t\r\n\t});\r\n\t\r\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvQWRtaW4uanMiLCJqcy9zcmMvUmVjb3Jkc1RhYmxlLmpzIiwianMvc3JjL1J1bGVzVGFibGUuanMiLCJqcy9zcmMvVGFibGUuanMiLCJqcy9zcmMvZW50cnkuanMiLCJub2RlX21vZHVsZXMvQHBlcnJ5LXJ5bGFuY2UvZGF0YS10YWJsZS9EYXRhVGFibGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQUE7O0FBQ0E7Ozs7OztJQUVxQixLLEdBRXBCLGlCQUNBO0FBQUE7O0FBQ0MsT0FBSyxVQUFMLEdBQW1CLElBQUksc0JBQUosQ0FBZSxDQUFDLENBQUMsY0FBRCxDQUFoQixDQUFuQjtBQUNBLE9BQUssWUFBTCxHQUFvQixJQUFJLHdCQUFKLENBQWlCLENBQUMsQ0FBQyxnQkFBRCxDQUFsQixDQUFwQjtBQUVBLEVBQUEsQ0FBQyxDQUFDLGtCQUFELENBQUQsQ0FBc0IsSUFBdEI7QUFDQSxDOzs7QUFHRixNQUFNLENBQUMsU0FBUCxHQUFtQjtBQUNsQixFQUFBLEtBQUssRUFBRSxJQUFJLEtBQUo7QUFEVyxDQUFuQjs7Ozs7Ozs7OztBQ2RBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUVxQixZOzs7OztBQUVwQix3QkFBWSxPQUFaLEVBQ0E7QUFBQTs7QUFBQTs7QUFDQyw4QkFBTSxPQUFOO0FBRUEsSUFBQSxDQUFDLENBQUMsa0NBQUQsQ0FBRCxDQUFzQyxFQUF0QyxDQUF5QyxPQUF6QyxFQUFrRCxVQUFDLEtBQUQ7QUFBQSxhQUFXLE1BQUssY0FBTCxDQUFvQixLQUFwQixDQUFYO0FBQUEsS0FBbEQ7QUFDQSxJQUFBLENBQUMsQ0FBQyxnQ0FBRCxDQUFELENBQW9DLEVBQXBDLENBQXVDLE9BQXZDLEVBQWdELFVBQUMsS0FBRDtBQUFBLGFBQVcsTUFBSyxZQUFMLENBQWtCLEtBQWxCLENBQVg7QUFBQSxLQUFoRDtBQUpEO0FBS0M7Ozs7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QUFDLENBQUMsRUFBRCxDQUFELENBQU0sSUFBTixDQUFXLHNCQUFYLEtBQXNDLE9BQXpDLEVBQ0M7QUFFRCxJQUFBLEVBQUUsQ0FBQyxTQUFILEdBQWUsU0FBUyxDQUFDLGNBQVYsQ0FBeUIsRUFBekIsQ0FBZjtBQUVBLEdBUEQ7QUFTQSxDQVhEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IFJ1bGVzVGFibGUgZnJvbSBcIi4vUnVsZXNUYWJsZVwiO1xyXG5pbXBvcnQgUmVjb3Jkc1RhYmxlIGZyb20gXCIuL1JlY29yZHNUYWJsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWRtaW5cclxue1xyXG5cdGNvbnN0cnVjdG9yKClcclxuXHR7XHJcblx0XHR0aGlzLnJ1bGVzVGFibGVcdFx0PSBuZXcgUnVsZXNUYWJsZSgkKFwiI3J1bGVzIHRhYmxlXCIpKTtcclxuXHRcdHRoaXMucmVjb3Jkc1RhYmxlXHQ9IG5ldyBSZWNvcmRzVGFibGUoJChcIiNyZWNvcmRzIHRhYmxlXCIpKTtcclxuXHRcdFxyXG5cdFx0JChcIiNyZXN0LWNhY2hlLXRhYnNcIikudGFicygpO1xyXG5cdH1cclxufVxyXG5cclxud2luZG93LlJFU1RDYWNoZSA9IHtcclxuXHRhZG1pbjogbmV3IEFkbWluKClcclxufTsiLCJpbXBvcnQgVGFibGUgZnJvbSBcIi4vVGFibGVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlY29yZHNUYWJsZSBleHRlbmRzIFRhYmxlXHJcbntcclxuXHRjb25zdHJ1Y3RvcihlbGVtZW50KVxyXG5cdHtcclxuXHRcdHN1cGVyKGVsZW1lbnQpO1xyXG5cdFx0XHJcblx0XHQkKFwiI3Jlc3QtY2FjaGUtYWRtaW4gI3JlZnJlc2gtdGFibGVcIikub24oXCJjbGlja1wiLCAoZXZlbnQpID0+IHRoaXMub25SZWZyZXNoVGFibGUoZXZlbnQpKTtcclxuXHRcdCQoXCIjcmVzdC1jYWNoZS1hZG1pbiAjY2xlYXItY2FjaGVcIikub24oXCJjbGlja1wiLCAoZXZlbnQpID0+IHRoaXMub25DbGVhckNhY2hlKGV2ZW50KSk7XHJcblx0fVxyXG5cdFxyXG5cdG9uUmVmcmVzaFRhYmxlKGV2ZW50KVxyXG5cdHtcclxuXHRcdCQoXCIjcmVzdC1jYWNoZS1hZG1pbiAjcmVjb3JkcyAuZGF0YVRhYmxlXCIpLkRhdGFUYWJsZSgpLmFqYXgucmVsb2FkKCk7XHJcblx0fVxyXG5cdFxyXG5cdG9uQ2xlYXJDYWNoZShldmVudClcclxuXHR7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdCQuYWpheCh0aGlzLnVybCwge1xyXG5cdFx0XHRtZXRob2Q6IFwiREVMRVRFXCIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMsIHhocikge1xyXG5cdFx0XHRcdHNlbGYub25BY3Rpb25Db21wbGV0ZShyZXNwb25zZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRvbkFjdGlvbkNvbXBsZXRlKGV2ZW50KVxyXG5cdHtcclxuXHRcdHRoaXMuJGVsZW1lbnQuRGF0YVRhYmxlKCkuYWpheC5yZWxvYWQoKTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IFRhYmxlIGZyb20gXCIuL1RhYmxlXCI7XHJcbiBcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUnVsZXNUYWJsZSBleHRlbmRzIFRhYmxlXHJcbntcclxuXHRjb25zdHJ1Y3RvcihlbGVtZW50KVxyXG5cdHtcclxuXHRcdHN1cGVyKGVsZW1lbnQpO1xyXG5cdFx0XHJcblx0XHR0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCJbZGF0YS1hY3Rpb249J2NhbmNlbCddXCIsIGV2ZW50ID0+IHRoaXMub25DYW5jZWwoZXZlbnQpKTtcclxuXHRcdFxyXG5cdFx0JChcImJ1dHRvbiNhZGQtcnVsZVwiKS5vbihcImNsaWNrXCIsIChldmVudCkgPT4gdGhpcy5vbkFkZFJ1bGUoZXZlbnQpKTtcclxuXHR9XHJcblx0XHJcblx0Z2V0Q29udHJvbEZyb21GaWVsZChmaWVsZClcclxuXHR7XHJcblx0XHRzd2l0Y2goZmllbGQpXHJcblx0XHR7XHJcblx0XHRcdGNhc2UgXCJyZWdleFwiOlxyXG5cdFx0XHRcclxuXHRcdFx0XHR2YXIgJGlucHV0ID0gc3VwZXIuZ2V0Q29udHJvbEZyb21GaWVsZChmaWVsZCk7XHJcblx0XHRcdFx0JGlucHV0LmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcblx0XHRcdFx0cmV0dXJuICRpbnB1dDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHJcblx0XHRcdGNhc2UgXCJiZWhhdmlvdXJcIjpcclxuXHRcdFx0XHJcblx0XHRcdFx0dmFyICRzZWxlY3QgPSAkKFwiPHNlbGVjdCBuYW1lPSdiZWhhdmlvdXInPlxcXHJcblx0XHRcdFx0XHQ8b3B0aW9uIHZhbHVlPSdleGNsdWRlJz5FeGNsdWRlPC9vcHRpb24+XFxcclxuXHRcdFx0XHRcdDxvcHRpb24gdmFsdWU9J2luY2x1ZGUnPkluY2x1ZGU8L29wdGlvbj5cXFxyXG5cdFx0XHRcdDwvc2VsZWN0PlwiKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRyZXR1cm4gJHNlbGVjdDtcclxuXHRcdFx0XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFxyXG5cdFx0XHRjYXNlIFwicHJpb3JpdHlcIjpcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgJGlucHV0ID0gc3VwZXIuZ2V0Q29udHJvbEZyb21GaWVsZChmaWVsZCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JGlucHV0LmF0dHIoXCJ0eXBlXCIsIFwibnVtYmVyXCIpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHJldHVybiAkaW5wdXQ7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzdXBlci5nZXRDb250cm9sRnJvbUZpZWxkKGZpZWxkKTtcclxuXHR9XHJcblx0XHJcblx0b25DYW5jZWwoZXZlbnQpXHJcblx0e1xyXG5cdFx0dGhpcy4kZWxlbWVudC5EYXRhVGFibGUoKS5hamF4LnJlbG9hZCgpO1xyXG5cdH1cclxuXHRcclxuXHRvbkFkZFJ1bGUoZXZlbnQpXHJcblx0e1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHJcblx0XHQkLmFqYXgodGhpcy51cmwsIHtcclxuXHRcdFx0bWV0aG9kOiBcIlBPU1RcIixcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1cywgeGhyKSB7XHJcblx0XHRcdFx0c2VsZi4kZWxlbWVudC5EYXRhVGFibGUoKS5hamF4LnJlbG9hZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn0iLCJpbXBvcnQgRGF0YVRhYmxlIGZyb20gXCJAcGVycnktcnlsYW5jZS9kYXRhLXRhYmxlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZSBleHRlbmRzIERhdGFUYWJsZVxyXG57XHJcblx0Y29uc3RydWN0b3IoZWxlbWVudClcclxuXHR7XHJcblx0XHRzdXBlcihlbGVtZW50KTtcclxuXHRcdFxyXG5cdFx0dGhpcy4kZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblx0XHRcclxuXHRcdHRoaXMudXJsID0gdGhpcy4kZWxlbWVudC5hdHRyKFwiZGF0YS1yb3V0ZVwiKTtcclxuXHRcdFxyXG5cdFx0dGhpcy4kZWxlbWVudC5vbihcImNsaWNrXCIsIFwiW2RhdGEtYWN0aW9uPSdlZGl0J11cIiwgZXZlbnQgPT4gdGhpcy5vbkVkaXQoZXZlbnQpKTtcclxuXHRcdHRoaXMuJGVsZW1lbnQub24oXCJjbGlja1wiLCBcIltkYXRhLWFjdGlvbj0ndXBkYXRlJ11cIiwgZXZlbnQgPT4gdGhpcy5vblVwZGF0ZShldmVudCkpO1xyXG5cdFx0dGhpcy4kZWxlbWVudC5vbihcImNsaWNrXCIsIFwiW2RhdGEtYWN0aW9uPSdkZWxldGUnXVwiLCBldmVudCA9PiB0aGlzLm9uRGVsZXRlKGV2ZW50KSk7XHJcblx0fVxyXG5cdFxyXG5cdGdldElERnJvbUV2ZW50KGV2ZW50KVxyXG5cdHtcclxuXHRcdGxldCAkdHIgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCJ0clwiKTtcclxuXHRcdGxldCBpZCA9ICR0ci5hdHRyKFwiZGF0YS1pZFwiKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGlkO1xyXG5cdH1cclxuXHRcclxuXHRnZXRDb250cm9sRnJvbUZpZWxkKGZpZWxkKVxyXG5cdHtcclxuXHRcdGxldCAkaW5wdXQgPSAkKFwiPGlucHV0Lz5cIik7XHJcblx0XHQkaW5wdXQuYXR0cihcIm5hbWVcIiwgZmllbGQpO1xyXG5cdFx0cmV0dXJuICRpbnB1dDtcclxuXHR9XHJcblx0XHJcblx0c2V0SXRlbUVkaXRhYmxlKGlkKVxyXG5cdHtcclxuXHRcdGxldCBzZWxmID0gdGhpcztcclxuXHRcdGxldCAkdHIgPSB0aGlzLiRlbGVtZW50LmZpbmQoXCJ0cltkYXRhLWlkPSdcIiArIGlkICsgXCInXVwiKTtcclxuXHRcdFxyXG5cdFx0JHRyLmNoaWxkcmVuKFwidGRcIikuZWFjaChmdW5jdGlvbihpbmRleCwgdGQpIHtcclxuXHRcdFx0XHJcblx0XHRcdGxldCBmaWVsZCA9ICQodGQpLmF0dHIoXCJkYXRhLWZpZWxkXCIpO1xyXG5cdFx0XHRcclxuXHRcdFx0c3dpdGNoKGZpZWxkKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y2FzZSBcImlkXCI6XHJcblx0XHRcdFx0Y2FzZSBcImFjdGlvbnNcIjpcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxldCAkaW5wdXQgPSBzZWxmLmdldENvbnRyb2xGcm9tRmllbGQoZmllbGQpO1xyXG5cdFx0XHRcclxuXHRcdFx0c3dpdGNoKCRpbnB1dC5hdHRyKFwidHlwZVwiKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNhc2UgXCJjaGVja2JveFwiOlxyXG5cdFx0XHRcdFx0JGlucHV0LnByb3AoXCJjaGVja2VkXCIsICQodGQpLnRleHQoKSA9PSAxKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHQkaW5wdXQudmFsKCQodGQpLnRleHQoKSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0JCh0ZCkuZW1wdHkoKTtcclxuXHRcdFx0JCh0ZCkuYXBwZW5kKCRpbnB1dCk7XHJcblx0XHRcdFxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdCR0ci5hZGRDbGFzcyhcInJlc3QtY2FjaGUtZWRpdGluZ1wiKTtcclxuXHR9XHJcblx0XHJcblx0b25FZGl0KGV2ZW50KVxyXG5cdHtcclxuXHRcdGxldCBpZCA9IHRoaXMuZ2V0SURGcm9tRXZlbnQoZXZlbnQpO1xyXG5cdFx0dGhpcy5zZXRJdGVtRWRpdGFibGUoaWQpO1xyXG5cdH1cclxuXHRcclxuXHRvblVwZGF0ZShldmVudClcclxuXHR7XHJcblx0XHRsZXQgc2VsZlx0PSB0aGlzO1xyXG5cdFx0bGV0IGlkXHRcdD0gdGhpcy5nZXRJREZyb21FdmVudChldmVudCk7XHJcblx0XHRsZXQgZGF0YVx0PSB7fTtcclxuXHRcdGxldCAkdHJcdFx0PSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoXCJ0clwiKTtcclxuXHRcdFxyXG5cdFx0JHRyLmZpbmQoXCI6aW5wdXRcIikuZWFjaChmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciBuYW1lID0gJChlbCkuYXR0cihcIm5hbWVcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRpZighbmFtZSlcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFxyXG5cdFx0XHRzd2l0Y2goJChlbCkuYXR0cihcInR5cGVcIikpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjYXNlIFwiY2hlY2tib3hcIjpcclxuXHRcdFx0XHRjYXNlIFwicmFkaW9cIjpcclxuXHRcdFx0XHRcdGRhdGFbbmFtZV0gPSAkKGVsKS5wcm9wKFwiY2hlY2tlZFwiKSA/IDEgOiAwO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGRhdGFbbmFtZV0gPSAkKGVsKS52YWwoKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdCQuYWpheCh0aGlzLnVybCArIFwiL1wiICsgaWQsIHtcclxuXHRcdFx0bWV0aG9kOiBcIlBVVFwiLFxyXG5cdFx0XHRkYXRhOiBkYXRhLFxyXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSwgc3RhdHVzLCB4aHIpIHtcclxuXHRcdFx0XHRzZWxmLm9uQWN0aW9uQ29tcGxldGUocmVzcG9uc2UpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcblx0XHRcdFx0aWYoeGhyLnN0YXR1cyA9PSA0MjIpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dmFyIGpzb24gPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xyXG5cdFx0XHRcdFx0c2VsZi5vbkVycm9yKHhoci5zdGF0dXMsIGpzb24pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdG9uRGVsZXRlKGV2ZW50KVxyXG5cdHtcclxuXHRcdGxldCBzZWxmXHQ9IHRoaXM7XHJcblx0XHRsZXQgaWRcdFx0PSB0aGlzLmdldElERnJvbUV2ZW50KGV2ZW50KTtcclxuXHRcdFxyXG5cdFx0JC5hamF4KHRoaXMudXJsICsgXCIvXCIgKyBpZCwge1xyXG5cdFx0XHRtZXRob2Q6IFwiREVMRVRFXCIsXHJcblx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMsIHhocikge1xyXG5cdFx0XHRcdHNlbGYub25BY3Rpb25Db21wbGV0ZShyZXNwb25zZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRvbkFjdGlvbkNvbXBsZXRlKGV2ZW50KVxyXG5cdHtcclxuXHRcdHRoaXMuJGVsZW1lbnQuRGF0YVRhYmxlKCkuYWpheC5yZWxvYWQoKTtcclxuXHR9XHJcblx0XHJcblx0b25FcnJvcihjb2RlLCBqc29uKVxyXG5cdHtcclxuXHRcdGZvcih2YXIga2V5IGluIGpzb24uZXJyb3JzKVxyXG5cdFx0e1xyXG5cdFx0XHRhbGVydChqc29uLmVycm9yc1trZXldKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwicmVxdWlyZSgnLi9BZG1pbicpOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGFUYWJsZVxyXG57XHJcblx0Y29uc3RydWN0b3IoZWxlbWVudClcclxuXHR7XHJcblx0XHRpZigkLmZuLmRhdGFUYWJsZS5leHQpXHJcblx0XHRcdCQuZm4uZGF0YVRhYmxlLmV4dC5lcnJNb2RlID0gXCJ0aHJvd1wiO1xyXG5cdFx0XHJcblx0XHR0aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHRcdFxyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLmdldERhdGFUYWJsZU9wdGlvbnMoKTtcclxuXHRcdHRoaXMuJGVsZW1lbnQuRGF0YVRhYmxlKG9wdGlvbnMpO1xyXG5cdH1cclxuXHRcclxuXHRnZXREYXRhVGFibGVPcHRpb25zKClcclxuXHR7XHJcblx0XHR2YXIgZmllbGRzXHQ9IHRoaXMuZ2V0Q29sdW1uRmllbGRzKCk7XHJcblx0XHR2YXIgY29sdW1uc1x0PSBbXTtcclxuXHRcdFxyXG5cdFx0ZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQpIHtcclxuXHRcdFx0Y29sdW1ucy5wdXNoKHtcclxuXHRcdFx0XHRcImRhdGFcIjogZmllbGRcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0XCJhamF4XCI6XHRcdFx0dGhpcy4kZWxlbWVudC5hdHRyKFwiZGF0YS1yb3V0ZVwiKSxcclxuXHRcdFx0XCJwcm9jZXNzaW5nXCI6XHR0cnVlLFxyXG5cdFx0XHRcInNlcnZlclNpZGVcIjpcdHRydWUsXHJcblx0XHRcdFwiY29sdW1uc1wiOlx0XHRjb2x1bW5zLFxyXG5cdFx0XHRcImNyZWF0ZWRSb3dcIjpcdGZ1bmN0aW9uKHJvdywgZGF0YSwgaW5kZXgpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZighKFwiaWRcIiBpbiBkYXRhKSlcclxuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIk5vIElEIGluIHJvdyBkYXRhXCIpO1xyXG5cdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdCQocm93KS5hdHRyKFwiZGF0YS1pZFwiLCBkYXRhLmlkKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgaW5kZXggPSAwO1xyXG5cdFx0XHRcdCQocm93KS5jaGlsZHJlbihcInRkXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIHRkKSB7XHJcblx0XHRcdFx0XHQkKHRkKS5hdHRyKFwiZGF0YS1maWVsZFwiLCBmaWVsZHNbaW5kZXhdKVxyXG5cdFx0XHRcdFx0aW5kZXgrKztcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcblx0XHJcblx0Z2V0Q29sdW1uRmllbGRzKClcclxuXHR7XHJcblx0XHR2YXIgcmVzdWx0cyA9IFtdO1xyXG5cdFx0XHJcblx0XHR0aGlzLiRlbGVtZW50LmZpbmQoXCJ0aFtkYXRhLWNvbHVtbi1maWVsZF1cIikuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0cmVzdWx0cy5wdXNoKCAkKHRoaXMpLmF0dHIoXCJkYXRhLWNvbHVtbi1maWVsZFwiKSApO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiByZXN1bHRzO1xyXG5cdH1cclxufVxyXG5cclxuRGF0YVRhYmxlLmNyZWF0ZUluc3RhbmNlID0gZnVuY3Rpb24oZWxlbWVudClcclxue1xyXG5cdHJldHVybiBuZXcgRGF0YVRhYmxlKGVsZW1lbnQpO1xyXG59XHJcblxyXG4kKHdpbmRvdykub24oXCJsb2FkXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcblx0XHJcblx0JChcInRhYmxlLnBlcnJ5LXJ5bGFuY2UtZGF0YXRhYmxlXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsKSB7XHJcblx0XHRcclxuXHRcdGlmKCQoZWwpLmF0dHIoXCJkYXRhLWF1dG8taW5pdGlhbGl6ZVwiKSA9PSBcImZhbHNlXCIpXHJcblx0XHRcdHJldHVybjtcclxuXHRcdFxyXG5cdFx0ZWwuZGF0YVRhYmxlID0gRGF0YVRhYmxlLmNyZWF0ZUluc3RhbmNlKGVsKTtcclxuXHRcdFxyXG5cdH0pO1xyXG5cdFxyXG59KTsiXX0="}